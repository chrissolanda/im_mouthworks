{"version":3,"sources":["../../../../../../im_mouthworks/im_mouthworks/node_modules/next/src/server/route-modules/app-page/module.compiled.js","../../../../../../im_mouthworks/im_mouthworks/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","../../../../../../im_mouthworks/im_mouthworks/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts","../../../../../../im_mouthworks/im_mouthworks/lib/auth-context.tsx"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n","\"use client\"\r\n\r\nimport type React from \"react\"\r\nimport { createContext, useContext, useState, useEffect } from \"react\"\r\nimport { getSupabaseClient } from \"./supabase-client\"\r\n\r\nexport type UserRole = \"patient\" | \"dentist\" | \"hr\"\r\n\r\nexport interface User {\r\n  id: string\r\n  email: string\r\n  name: string\r\n  role: UserRole\r\n  phone?: string\r\n  specialization?: string\r\n}\r\n\r\ninterface AuthContextType {\r\n  user: User | null\r\n  loading: boolean\r\n  login: (email: string, password: string) => Promise<void>\r\n  patientAutoApproved?: boolean\r\n  register: (email: string, password: string, name: string, phone?: string) => Promise<any>\r\n  logout: () => void\r\n  isAuthenticated: boolean\r\n  showPatientRegistration: boolean\r\n  savePatientProfile: (name: string, phone?: string) => Promise<void>\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined)\r\n\r\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\r\n  const [user, setUser] = useState<User | null>(null)\r\n  const [loading, setLoading] = useState(true)\r\n  const [showPatientRegistration, setShowPatientRegistration] = useState(false)\r\n  const [patientAutoApproved, setPatientAutoApproved] = useState(false)\r\n\r\n  useEffect(() => {\r\n    const initializeAuth = async () => {\r\n      try {\r\n        const supabase = getSupabaseClient()\r\n        const {\r\n          data: { user: authUser },\r\n          error,\r\n        } = await supabase.auth.getUser()\r\n\r\n        if (authUser && !error) {\r\n          const emailStr = authUser.email || \"\"\r\n          const roleFromMeta = authUser.user_metadata?.role || \"patient\"\r\n          const isGmail = emailStr.toLowerCase().endsWith(\"@gmail.com\")\r\n          setUser({\r\n            id: authUser.id,\r\n            email: emailStr,\r\n            name: authUser.user_metadata?.name || emailStr || \"\",\r\n            role: roleFromMeta,\r\n            phone: authUser.user_metadata?.phone,\r\n            specialization: authUser.user_metadata?.specialization,\r\n          })\r\n          // For Gmail patients, do not show registration modal; mark as auto-approved\r\n          if (roleFromMeta === \"patient\" && isGmail) {\r\n            setShowPatientRegistration(false)\r\n            setPatientAutoApproved(true)\r\n            // Ensure a patient row exists for Gmail users so booking and payments work\r\n            try {\r\n              const { patientService } = await import(\"./db-service\")\r\n              const existingPatient = await patientService.getByEmail(emailStr)\r\n              if (!existingPatient) {\r\n                await patientService.create({\r\n                  user_id: authUser.id,\r\n                  name: authUser.user_metadata?.name || emailStr,\r\n                  email: emailStr,\r\n                  phone: authUser.user_metadata?.phone || null,\r\n                  dob: null,\r\n                  gender: null,\r\n                  address: null,\r\n                })\r\n              }\r\n            } catch (err) {\r\n              console.warn(\"[v0] Could not auto-create patient record for Gmail user:\", err)\r\n            }\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error(\"[v0] Auth initialization error:\", error)\r\n      }\r\n      setLoading(false)\r\n    }\r\n\r\n    initializeAuth()\r\n  }, [])\r\n\r\n  const login = async (email: string, password: string) => {\r\n    // First try to authenticate against the `auth_users` table (registered users)\r\n    try {\r\n      const supabase = getSupabaseClient()\r\n      const { data: authUser, error } = await supabase.from(\"auth_users\").select(\"*\").eq(\"email\", email).maybeSingle()\r\n      if (error) {\r\n        console.warn(\"[v0] Supabase error checking auth_users:\", error)\r\n      }\r\n      if (authUser) {\r\n        // simple password check (password_hash stores the password in this demo app)\r\n        if (authUser.password_hash === password) {\r\n          const userObj: User = {\r\n            id: authUser.id,\r\n            email: authUser.email,\r\n            name: authUser.name || authUser.email,\r\n            role: authUser.role as UserRole,\r\n            phone: authUser.phone || undefined,\r\n            specialization: authUser.specialization || undefined,\r\n          }\r\n          setUser(userObj)\r\n          localStorage.setItem(\"user\", JSON.stringify(userObj))\r\n          // If this is a patient and they don't have a patients row, prompt for profile\r\n          // but if they're signing in with Gmail, auto-approve and do not show modal\r\n          const isGmail = (userObj.email || \"\").toLowerCase().endsWith(\"@gmail.com\")\r\n          if (userObj.role === \"patient\") {\r\n            if (isGmail) {\r\n              setShowPatientRegistration(false)\r\n              setPatientAutoApproved(true)\r\n              // Ensure a patient row exists for Gmail logins\r\n              try {\r\n                const { patientService } = await import(\"./db-service\")\r\n                const existingPatient = await patientService.getByEmail(userObj.email)\r\n                if (!existingPatient) {\r\n                  await patientService.create({\r\n                    user_id: userObj.id,\r\n                    name: userObj.name || userObj.email,\r\n                    email: userObj.email,\r\n                    phone: userObj.phone || null,\r\n                    dob: null,\r\n                    gender: null,\r\n                    address: null,\r\n                  })\r\n                }\r\n              } catch (err) {\r\n                console.warn(\"[v0] Could not auto-create patient record after login:\", err)\r\n              }\r\n            } else {\r\n              setShowPatientRegistration(true)\r\n              setPatientAutoApproved(false)\r\n            }\r\n          }\r\n          return\r\n        } else {\r\n          throw new Error(\"Invalid credentials\")\r\n        }\r\n      }\r\n\r\n    } catch (err) {\r\n      console.warn(\"[v0] Error authenticating against auth_users:\", err)\r\n    }\r\n\r\n    // If no auth_users match, try Supabase Auth sign-in (for accounts created via Supabase)\r\n    try {\r\n      const supabase = getSupabaseClient()\r\n      const { data, error } = await supabase.auth.signInWithPassword({ email, password })\r\n      if (error) {\r\n        // Not authenticated via Supabase - proceed to mock users handling below\r\n        console.warn(\"[v0] Supabase auth signIn error:\", error)\r\n      } else if (data && data.user) {\r\n        const authUser = data.user\r\n        const roleFromMeta = (authUser.user_metadata as any)?.role || \"patient\"\r\n        const userObj: User = {\r\n          id: authUser.id,\r\n          email: authUser.email || email,\r\n          name: (authUser.user_metadata as any)?.name || authUser.email || email,\r\n          role: roleFromMeta as UserRole,\r\n          phone: (authUser.user_metadata as any)?.phone || undefined,\r\n          specialization: (authUser.user_metadata as any)?.specialization || undefined,\r\n        }\r\n        setUser(userObj)\r\n        localStorage.setItem(\"user\", JSON.stringify(userObj))\r\n\r\n        // For patient users, handle registration modal and auto-approval\r\n        if (userObj.role === \"patient\") {\r\n          // Gmail patients auto-approve\r\n          const isGmail = (userObj.email || \"\").toLowerCase().endsWith(\"@gmail.com\")\r\n          if (isGmail) {\r\n            setShowPatientRegistration(false)\r\n            setPatientAutoApproved(true)\r\n          } else {\r\n            // Non-Gmail patients created via Supabase Auth: don't show registration modal\r\n            // (they already have an auth account), just set auto-approved\r\n            setShowPatientRegistration(false)\r\n            setPatientAutoApproved(true)\r\n          }\r\n          \r\n          // Ensure patient record exists in database\r\n          try {\r\n            const { patientService } = await import(\"./db-service\")\r\n            const existingPatient = await patientService.getByEmail(userObj.email)\r\n            if (!existingPatient) {\r\n              await patientService.create({\r\n                user_id: userObj.id,\r\n                name: userObj.name || userObj.email,\r\n                email: userObj.email,\r\n                phone: userObj.phone || null,\r\n                dob: null,\r\n                gender: null,\r\n                address: null,\r\n              })\r\n            }\r\n          } catch (err) {\r\n            console.warn(\"[v0] Could not auto-create patient record after supabase login:\", err)\r\n          }\r\n        }\r\n\r\n        return\r\n      }\r\n    } catch (err) {\r\n      console.warn(\"[v0] Error authenticating via Supabase auth:\", err)\r\n    }\r\n\r\n    const mockUsers: Record<string, User> = {\r\n      \"dentist@example.com\": {\r\n        id: \"7a8c5e19-d3f2-4b7a-8c6f-5e2d9a1b3c47\",\r\n        email: \"dentist@example.com\",\r\n        name: \"Dr. Sarah Dentist\",\r\n        role: \"dentist\",\r\n        specialization: \"General Dentistry\",\r\n      },\r\n      \"hr@example.com\": {\r\n        id: \"9b2d1f8a-6c3e-4d9a-8b5f-7e2c1a3d6b9e\",\r\n        email: \"hr@example.com\",\r\n        name: \"Admin HR\",\r\n        role: \"hr\",\r\n      },\r\n      \"sarah.smith@dental.com\": {\r\n        id: \"a2b6f9aa-c1db-4126-91ea-e68ce0764cf7\",\r\n        email: \"sarah.smith@dental.com\",\r\n        name: \"Dr. Sarah Smith\",\r\n        role: \"dentist\",\r\n        specialization: \"General Dentistry\",\r\n      },\r\n      \"john.doe@dental.com\": {\r\n        id: \"36bbff44-0df3-4926-a241-83e753324ffa\",\r\n        email: \"john.doe@dental.com\",\r\n        name: \"Dr. John Doe\",\r\n        role: \"dentist\",\r\n        specialization: \"Orthodontics\",\r\n      },\r\n      \"emily.johnson@dental.com\": {\r\n        id: \"63d250c7-d355-4eaa-b99e-d502b7db5dfb\",\r\n        email: \"emily.johnson@dental.com\",\r\n        name: \"Dr. Emily Johnson\",\r\n        role: \"dentist\",\r\n        specialization: \"Periodontics\",\r\n      },\r\n      \"michael.chen@dental.com\": {\r\n        id: \"eab4dac1-1534-4b6d-80d1-243273ee4773\",\r\n        email: \"michael.chen@dental.com\",\r\n        name: \"Dr. Michael Chen\",\r\n        role: \"dentist\",\r\n        specialization: \"Prosthodontics\",\r\n      },\r\n      \"lisa.anderson@dental.com\": {\r\n        id: \"8e87c140-0749-4fe1-9713-39b05df2f566\",\r\n        email: \"lisa.anderson@dental.com\",\r\n        name: \"Dr. Lisa Anderson\",\r\n        role: \"dentist\",\r\n        specialization: \"Endodontics\",\r\n      },\r\n    }\r\n\r\n    const mockUser = mockUsers[email]\r\n    if (mockUser) {\r\n      setUser(mockUser)\r\n      localStorage.setItem(\"user\", JSON.stringify(mockUser))\r\n      return\r\n    } else {\r\n      throw new Error(\"Invalid credentials\")\r\n    }\r\n  }\r\n\r\n  const register = async (email: string, password: string, name: string, phone?: string) => {\r\n    const supabase = getSupabaseClient()\r\n    // Check existing auth_users\r\n    const { data: existing, error: getErr } = await supabase.from(\"auth_users\").select(\"*\").eq(\"email\", email).maybeSingle()\r\n    if (getErr) {\r\n      console.error(\"[v0] Error checking existing auth user:\", getErr)\r\n      throw new Error(\"Registration failed\")\r\n    }\r\n    if (existing) {\r\n      // Return a structured result instead of throwing so callers can handle it gracefully\r\n      return { status: \"exists\", user: existing }\r\n    }\r\n\r\n    try {\r\n      // Create auth_users entry (password_hash stores password in this demo)\r\n      const { data: createdAuth, error: insertErr } = await supabase\r\n        .from(\"auth_users\")\r\n        .insert([\r\n          { email, password_hash: password, name, role: \"patient\", phone: phone || null },\r\n        ])\r\n        .select()\r\n        .single()\r\n\r\n      if (insertErr || !createdAuth) {\r\n        console.error(\"[v0] Error creating auth user:\", insertErr)\r\n        throw new Error(\"Registration failed\")\r\n      }\r\n\r\n      // Create patients row linked to auth_users.id\r\n      const { data: patientRow, error: patientErr } = await supabase\r\n        .from(\"patients\")\r\n        .insert([\r\n          { user_id: createdAuth.id, name, email, phone: phone || null },\r\n        ])\r\n        .select()\r\n        .single()\r\n\r\n      if (patientErr) {\r\n        console.warn(\"[v0] Warning creating patient row:\", patientErr)\r\n      }\r\n\r\n      const userObj: User = {\r\n        id: createdAuth.id,\r\n        email: createdAuth.email,\r\n        name: createdAuth.name || name,\r\n        role: \"patient\",\r\n        phone: createdAuth.phone || phone || undefined,\r\n      }\r\n      setUser(userObj)\r\n      localStorage.setItem(\"user\", JSON.stringify(userObj))\r\n      setShowPatientRegistration(false)\r\n      return { status: \"created\", user: userObj }\r\n    } catch (err) {\r\n      const errorMsg = err instanceof Error ? err.message : String(err)\r\n      console.error(\"[v0] Registration error:\", errorMsg)\r\n      throw err\r\n    }\r\n  }\r\n\r\n  const logout = () => {\r\n    setUser(null)\r\n    localStorage.removeItem(\"user\")\r\n    const supabase = getSupabaseClient()\r\n    supabase.auth.signOut()\r\n  }\r\n\r\n  const savePatientProfile = async (name: string, phone?: string) => {\r\n    try {\r\n      if (!user || user.role !== \"patient\") {\r\n        throw new Error(\"Only patients can register\")\r\n      }\r\n\r\n      // Import patientService dynamically to avoid circular imports\r\n      const { patientService } = await import(\"./db-service\")\r\n\r\n      // Check for duplicate patient name\r\n      const existingPatient = await patientService.getByName(name)\r\n      if (existingPatient) {\r\n        throw new Error(`Patient with name '${name}' already exists. Please use a different name.`)\r\n      }\r\n\r\n      // Create patient record in database\r\n      const newPatient = await patientService.create({\r\n        name: name,\r\n        email: user.email,\r\n        phone: phone || null,\r\n        dob: null,\r\n        gender: null,\r\n        address: null,\r\n      })\r\n\r\n      // Ensure an auth_users row exists for this email\r\n      try {\r\n        const supabase = getSupabaseClient()\r\n        const { data: existingAuthUser, error: authErr } = await supabase.from(\"auth_users\").select(\"*\").eq(\"email\", user.email).maybeSingle()\r\n        if (authErr) {\r\n          console.warn(\"[v0] Warning checking auth_users:\", authErr)\r\n        }\r\n        if (!existingAuthUser) {\r\n          const { error: insertErr } = await supabase.from(\"auth_users\").insert([\r\n            {\r\n              email: user.email,\r\n              name: name,\r\n              role: \"patient\",\r\n              phone: phone || null,\r\n            },\r\n          ])\r\n          if (insertErr) {\r\n            console.warn(\"[v0] Warning inserting auth_users record:\", insertErr)\r\n          }\r\n        }\r\n      } catch (err) {\r\n        console.warn(\"[v0] Warning ensuring auth_users record:\", err)\r\n      }\r\n\r\n      if (newPatient) {\r\n        // Update user state with the new patient info\r\n        const updatedUser = { ...user, name: name, phone: phone }\r\n        setUser(updatedUser)\r\n        localStorage.setItem(\"user\", JSON.stringify(updatedUser))\r\n        setShowPatientRegistration(false)\r\n      }\r\n    } catch (error) {\r\n      const errorMsg = error instanceof Error ? error.message : String(error)\r\n      console.error(\"[v0] Error saving patient profile:\", errorMsg)\r\n      throw error\r\n    }\r\n  }\r\n\r\n  return (\r\n    <AuthContext.Provider\r\n      value={{\r\n        user,\r\n        loading,\r\n        login,\r\n        register,\r\n        logout,\r\n        isAuthenticated: !!user,\r\n        showPatientRegistration,\r\n        savePatientProfile,\r\n      }}\r\n    >\r\n      {children}\r\n    </AuthContext.Provider>\r\n  )\r\n}\r\n\r\nexport function useAuth() {\r\n  const context = useContext(AuthContext)\r\n  if (context === undefined) {\r\n    throw new Error(\"useAuth must be used within AuthProvider\")\r\n  }\r\n  return context\r\n}\r\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK","vendored","ReactJsxRuntime","React"],"mappings":"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","ignoreList":[0,1,2]}