{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Administrator/Downloads/OLANDA/lib/supabase-client.ts"],"sourcesContent":["import { createBrowserClient } from \"@supabase/ssr\"\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL || \"https://xpybqjfofdmkeiijvwnx.supabase.co\"\nconst supabaseAnonKey =\n  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY ||\n  \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhweWJxamZvZmRta2VpaWp2d254Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ1MDEyODAsImV4cCI6MjA4MDA3NzI4MH0.Dww9fKSwqzINDt18uhgcQJbeq4rnH3AEedEiteHZ-FQ\"\n\nlet supabaseClient: ReturnType<typeof createBrowserClient> | null = null\n\nexport function getSupabaseClient() {\n  if (!supabaseClient) {\n    supabaseClient = createBrowserClient(supabaseUrl, supabaseAnonKey)\n  }\n  return supabaseClient\n}\n"],"names":[],"mappings":";;;;AAAA;AAAA;;AAEA,MAAM,cAAc,QAAQ,GAAG,CAAC,wBAAwB,IAAI;AAC5D,MAAM,kBACJ,QAAQ,GAAG,CAAC,6BAA6B,IACzC;AAEF,IAAI,iBAAgE;AAE7D,SAAS;IACd,IAAI,CAAC,gBAAgB;QACnB,iBAAiB,IAAA,iMAAmB,EAAC,aAAa;IACpD;IACA,OAAO;AACT"}},
    {"offset": {"line": 30, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Administrator/Downloads/OLANDA/lib/auth-context.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\nimport { createContext, useContext, useState, useEffect } from \"react\"\nimport { getSupabaseClient } from \"./supabase-client\"\n\nexport type UserRole = \"patient\" | \"dentist\" | \"hr\"\n\nexport interface User {\n  id: string\n  email: string\n  name: string\n  role: UserRole\n  phone?: string\n  specialization?: string\n}\n\ninterface AuthContextType {\n  user: User | null\n  loading: boolean\n  login: (email: string, password: string) => Promise<void>\n  logout: () => void\n  isAuthenticated: boolean\n  showPatientRegistration: boolean\n  savePatientProfile: (name: string, phone?: string) => Promise<void>\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined)\n\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\n  const [user, setUser] = useState<User | null>(null)\n  const [loading, setLoading] = useState(true)\n  const [showPatientRegistration, setShowPatientRegistration] = useState(false)\n\n  useEffect(() => {\n    const initializeAuth = async () => {\n      try {\n        const supabase = getSupabaseClient()\n        const {\n          data: { user: authUser },\n          error,\n        } = await supabase.auth.getUser()\n\n        if (authUser && !error) {\n          setUser({\n            id: authUser.id,\n            email: authUser.email || \"\",\n            name: authUser.user_metadata?.name || authUser.email || \"\",\n            role: authUser.user_metadata?.role || \"patient\",\n            phone: authUser.user_metadata?.phone,\n            specialization: authUser.user_metadata?.specialization,\n          })\n        }\n      } catch (error) {\n        console.error(\"[v0] Auth initialization error:\", error)\n      }\n      setLoading(false)\n    }\n\n    initializeAuth()\n  }, [])\n\n  const login = async (email: string, password: string) => {\n    const mockUsers: Record<string, User> = {\n      \"patient@example.com\": {\n        id: \"f47ac10b-58cc-4372-a567-0e02b2c3d479\",\n        email: \"patient@example.com\",\n        name: \"John Patient\",\n        role: \"patient\",\n        phone: \"+1 234-567-8900\",\n      },\n      \"dentist@example.com\": {\n        id: \"7a8c5e19-d3f2-4b7a-8c6f-5e2d9a1b3c47\",\n        email: \"dentist@example.com\",\n        name: \"Dr. Sarah Dentist\",\n        role: \"dentist\",\n        specialization: \"General Dentistry\",\n      },\n      \"hr@example.com\": {\n        id: \"9b2d1f8a-6c3e-4d9a-8b5f-7e2c1a3d6b9e\",\n        email: \"hr@example.com\",\n        name: \"Admin HR\",\n        role: \"hr\",\n      },\n      \"sarah.smith@dental.com\": {\n        id: \"a2b6f9aa-c1db-4126-91ea-e68ce0764cf7\",\n        email: \"sarah.smith@dental.com\",\n        name: \"Dr. Sarah Smith\",\n        role: \"dentist\",\n        specialization: \"General Dentistry\",\n      },\n      \"john.doe@dental.com\": {\n        id: \"36bbff44-0df3-4926-a241-83e753324ffa\",\n        email: \"john.doe@dental.com\",\n        name: \"Dr. John Doe\",\n        role: \"dentist\",\n        specialization: \"Orthodontics\",\n      },\n      \"emily.johnson@dental.com\": {\n        id: \"63d250c7-d355-4eaa-b99e-d502b7db5dfb\",\n        email: \"emily.johnson@dental.com\",\n        name: \"Dr. Emily Johnson\",\n        role: \"dentist\",\n        specialization: \"Periodontics\",\n      },\n      \"michael.chen@dental.com\": {\n        id: \"eab4dac1-1534-4b6d-80d1-243273ee4773\",\n        email: \"michael.chen@dental.com\",\n        name: \"Dr. Michael Chen\",\n        role: \"dentist\",\n        specialization: \"Prosthodontics\",\n      },\n      \"lisa.anderson@dental.com\": {\n        id: \"8e87c140-0749-4fe1-9713-39b05df2f566\",\n        email: \"lisa.anderson@dental.com\",\n        name: \"Dr. Lisa Anderson\",\n        role: \"dentist\",\n        specialization: \"Endodontics\",\n      },\n    }\n\n    const mockUser = mockUsers[email]\n    if (mockUser) {\n      setUser(mockUser)\n      localStorage.setItem(\"user\", JSON.stringify(mockUser))\n      \n      // Show registration modal for new patients\n      if (mockUser.role === \"patient\") {\n        setShowPatientRegistration(true)\n      }\n    } else {\n      throw new Error(\"Invalid credentials\")\n    }\n  }\n\n  const logout = () => {\n    setUser(null)\n    localStorage.removeItem(\"user\")\n    const supabase = getSupabaseClient()\n    supabase.auth.signOut()\n  }\n\n  const savePatientProfile = async (name: string, phone?: string) => {\n    try {\n      if (!user || user.role !== \"patient\") {\n        throw new Error(\"Only patients can register\")\n      }\n\n      // Import patientService dynamically to avoid circular imports\n      const { patientService } = await import(\"./db-service\")\n\n      // Create patient record in database\n      const newPatient = await patientService.create({\n        name: name,\n        email: user.email,\n        phone: phone || null,\n        dob: null,\n        gender: null,\n        address: null,\n      })\n\n      if (newPatient) {\n        // Update user state with the new patient ID if needed\n        const updatedUser = { ...user, name: name, phone: phone }\n        setUser(updatedUser)\n        localStorage.setItem(\"user\", JSON.stringify(updatedUser))\n        setShowPatientRegistration(false)\n      }\n    } catch (error) {\n      const errorMsg = error instanceof Error ? error.message : String(error)\n      console.error(\"[v0] Error saving patient profile:\", errorMsg)\n      throw error\n    }\n  }\n\n  return (\n    <AuthContext.Provider\n      value={{\n        user,\n        loading,\n        login,\n        logout,\n        isAuthenticated: !!user,\n        showPatientRegistration,\n        savePatientProfile,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  )\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext)\n  if (context === undefined) {\n    throw new Error(\"useAuth must be used within AuthProvider\")\n  }\n  return context\n}\n"],"names":[],"mappings":"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"}}]
}