(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,66841,e=>{"use strict";var t=e.i(83740),a=e.i(63507);function r({className:e,type:r,...s}){return(0,t.jsx)("input",{type:r,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...s})}e.s(["Input",()=>r])},65177,e=>{"use strict";let t=(0,e.i(85879).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],65177)},54203,e=>{"use strict";var t=e.i(5334);e.s(["authService",0,{async signUp(e,a,r,s){let i=(0,t.getSupabaseClient)(),{data:n,error:l}=await i.auth.signUp({email:e,password:a,options:{data:{name:r,role:s}}});if(l)throw l;return n},async signIn(e,a){let r=(0,t.getSupabaseClient)(),{data:s,error:i}=await r.auth.signInWithPassword({email:e,password:a});if(i)throw i;return s},async signOut(){let e=(0,t.getSupabaseClient)(),{error:a}=await e.auth.signOut();if(a)throw a},async getCurrentUser(){let e=(0,t.getSupabaseClient)(),{data:{user:a},error:r}=await e.auth.getUser();if(r)throw r;return a},async getSession(){let e=(0,t.getSupabaseClient)(),{data:{session:a},error:r}=await e.auth.getSession();if(r)throw r;return a},async updatePassword(e,a){let r=(0,t.getSupabaseClient)();try{let t=await fetch("/api/auth/update-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:a})});if(!t.ok){let a=null;try{a=await t.json()}catch(e){}let s=a?.message||null;if(s&&s.toLowerCase().includes("server not configured")){let{data:t,error:a}=await r.auth.resetPasswordForEmail(e);if(a)throw a;return t}throw Error(s||"Failed to update password")}return await t.json()}catch(e){throw e}}}])},69185,e=>{"use strict";var t=e.i(83740),a=e.i(33033),r=e.i(81676),s=e.i(22941),i=e.i(54203),n=e.i(48827),l=e.i(97539),o=e.i(66841),d=e.i(65177);let c=(0,e.i(85879).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var u=e.i(14056);function m(){let[m,h]=(0,a.useState)(""),[p,x]=(0,a.useState)(""),[g,f]=(0,a.useState)(""),[b,y]=(0,a.useState)(!1),{login:v,register:j}=(0,s.useAuth)(),w=(0,r.useRouter)(),[N,S]=(0,a.useState)(!1),[C,k]=(0,a.useState)(""),[D,I]=(0,a.useState)(""),[P,A]=(0,a.useState)("patient"),[R,E]=(0,a.useState)(""),O=async e=>{e.preventDefault(),f(""),y(!0);try{await v(m,p);let e=localStorage.getItem("user");if(e){let t=JSON.parse(e);"patient"===t.role?w.push("/patient/dashboard"):"dentist"===t.role?w.push("/dentist/dashboard"):"hr"===t.role&&w.push("/hr/dashboard")}}catch(e){f(e instanceof Error?e.message:"Login failed")}finally{y(!1)}},U=async t=>{t.preventDefault(),f(""),y(!0);try{let t;if("patient"===P)t=await j(m,p,C,D||void 0);else if("dentist"===P){let a=(await e.A(39006)).getSupabaseClient();if((t=await a.auth.signUp({email:m,password:p,options:{data:{name:C,role:"dentist",phone:D||null,specialization:R||null}}})).error)throw t.error}else t=await i.authService.signUp(m,p,C,P);if(t&&"exists"===t.status)f("User with this email already exists. Please sign in instead."),S(!1);else try{await v(m,p);let e=localStorage.getItem("user");if(e){let t=JSON.parse(e);"patient"===t.role?w.push("/patient/dashboard"):"dentist"===t.role?w.push("/dentist/dashboard"):"hr"===t.role&&w.push("/hr/dashboard")}}catch(e){f("Account created, but auto-login failed. Please sign in manually."),S(!1)}}catch(e){f(e instanceof Error?e.message:"Registration failed")}finally{y(!1)}};return(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-secondary/10 flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"w-full max-w-md",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-2",children:[(0,t.jsx)("div",{className:"bg-primary rounded-lg p-2",children:(0,t.jsx)(u.Bluetooth,{className:"w-6 h-6 text-primary-foreground"})}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:"Mouthworks"})]}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Dental Clinic Management System"})]}),(0,t.jsxs)(n.Card,{className:"border-2 shadow-lg",children:[(0,t.jsxs)(n.CardHeader,{className:"bg-primary/5 border-b",children:[(0,t.jsx)(n.CardTitle,{children:"Welcome Back"}),(0,t.jsx)(n.CardDescription,{children:"Sign in to your account"})]}),(0,t.jsxs)(n.CardContent,{className:"pt-6",children:[(0,t.jsxs)("form",{onSubmit:N?U:O,className:"space-y-4",children:[g&&(0,t.jsxs)("div",{className:"p-3 bg-destructive/10 border border-destructive/30 rounded-lg flex gap-2",children:[(0,t.jsx)(d.AlertCircle,{className:"w-4 h-4 text-destructive flex-shrink-0 mt-0.5"}),(0,t.jsx)("p",{className:"text-sm text-destructive",children:g})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-foreground",children:"Email"}),(0,t.jsx)(o.Input,{type:"email",placeholder:"Enter your email",value:m,onChange:e=>h(e.target.value),disabled:b,className:"border-border focus:ring-primary"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-foreground",children:"Password"}),(0,t.jsx)(o.Input,{type:"password",placeholder:"Enter your password",value:p,onChange:e=>x(e.target.value),disabled:b,className:"border-border focus:ring-primary"})]}),N&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-foreground",children:"Role"}),(0,t.jsxs)("select",{value:P,onChange:e=>A(e.target.value),disabled:b,className:"w-full px-3 py-2 border border-border rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,t.jsx)("option",{value:"patient",children:"Patient"}),(0,t.jsx)("option",{value:"dentist",children:"Dentist"}),(0,t.jsx)("option",{value:"hr",children:"HR/Admin"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-foreground",children:"Full Name"}),(0,t.jsx)(o.Input,{type:"text",placeholder:"Your full name",value:C,onChange:e=>k(e.target.value),disabled:b,className:"border-border focus:ring-primary"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-foreground",children:"Phone (optional)"}),(0,t.jsx)(o.Input,{type:"tel",placeholder:"+1 234-567-8900",value:D,onChange:e=>I(e.target.value),disabled:b,className:"border-border focus:ring-primary"})]}),"dentist"===P&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-foreground",children:"Specialization (optional)"}),(0,t.jsx)(o.Input,{type:"text",placeholder:"e.g., General Dentistry",value:R,onChange:e=>E(e.target.value),disabled:b,className:"border-border focus:ring-primary"})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(l.Button,{type:"submit",disabled:b||!m||!p||N&&!C,className:"flex-1 bg-primary hover:bg-primary/90 text-primary-foreground font-semibold py-2 h-10",children:[b&&(0,t.jsx)(c,{className:"w-4 h-4 mr-2 animate-spin"}),b?N?"Registering...":"Signing in...":N?"Register":"Sign In"]}),(0,t.jsx)(l.Button,{type:"button",variant:"outline",onClick:()=>{if(N){try{w.replace("/patient/dashboard")}catch(e){try{window.location.href="/patient/dashboard"}catch(e){S(!1)}}setTimeout(()=>{"/patient/dashboard"!==window.location.pathname&&(window.location.href="/patient/dashboard")},500)}else S(!0)},className:"px-4",children:N?"Back":"Register"})]})]}),(0,t.jsxs)("div",{className:"mt-6 pt-6 border-t",children:[(0,t.jsx)("p",{className:"text-xs font-medium text-muted-foreground mb-3",children:"Demo Credentials:"}),(0,t.jsx)("div",{className:"space-y-2",children:[{email:"dentist@example.com",role:"Dentist"},{email:"hr@example.com",role:"HR/Admin"},{email:"sarah.smith@dental.com",role:"Dentist"},{email:"john.doe@dental.com",role:"Dentist"},{email:"emily.johnson@dental.com",role:"Dentist"},{email:"michael.chen@dental.com",role:"Dentist"},{email:"lisa.anderson@dental.com",role:"Dentist"}].map(e=>(0,t.jsxs)("button",{type:"button",onClick:()=>{h(e.email),x("demo")},className:"w-full p-2 text-left text-sm border border-border rounded-md hover:bg-muted transition-colors",children:[(0,t.jsx)("div",{className:"font-medium text-foreground",children:e.role}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:e.email})]},e.email))}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground text-center mt-3",children:"Any password works with demo accounts"})]})]})]})]})})}function h(){let[e,s]=(0,a.useState)(!1),[i,n]=(0,a.useState)(!0),l=(0,r.useRouter)();return((0,a.useEffect)(()=>{let e=localStorage.getItem("user");if(e){s(!0);let t=JSON.parse(e);"patient"===t.role?l.push("/patient/dashboard"):"dentist"===t.role?l.push("/dentist/dashboard"):"hr"===t.role&&l.push("/hr/dashboard")}n(!1)},[l]),i)?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-background",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"inline-block animate-spin",children:(0,t.jsx)("div",{className:"h-8 w-8 border-4 border-primary border-t-transparent rounded-full"})}),(0,t.jsx)("p",{className:"mt-4 text-foreground",children:"Loading..."})]})}):(0,t.jsx)(m,{})}e.s(["default",()=>h],69185)},39006,e=>{e.v(e=>Promise.resolve().then(()=>e(5334)))}]);